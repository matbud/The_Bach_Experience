<h1 class="text-center py-3"> <%= current_user.first_name  %>'s Dashboard</h1>
<div class="dashboard-container">
  <div class="row dashboard-row">
    <div class="col-4">
      <%# <div class="col-4 m-1 p-2" style="background-color:grey"> %>
      <br>
      <div class="row d-flex justify-content-center" style="background-color:white">
        <h3 class="text-center"> Summary Card</h3>
        <%= render 'events/summary_card' %>
        <%# <br>
        <br>
        <br> %>
      </div>
      <%# <br> %>
      <div class="row d-flex justify-content-center mt-1" style="background-color:white">
        <h3> Attendencies </h3>
        <br>
        <table class="table">
          <thead>
            <tr>
              <th class="px-3">Participant</th>
              <th class="px-3">Status</th>
            </tr>
          </thead>
          <tbody>
            <% @event.guests.each do |guest| %>
              <tr>
                <% if current_user.admin? %>
                  <td class="px-3"><%= guest.user.first_name %></td>
                  <% if guest.status == "accepted" %>
                    <td class="px-3"><%= "#{guest.status} ✔️" %></td>
                  <% elsif guest.status == "rejected" %>
                    <td class="px-3"><%= "#{guest.status} ❌" %></td>
                  <% else %>
                    <td class="px-3"><%= guest.status %></td>
                  <% end %>
                <% else %>
                  <td class="px-3"><%= guest.user.first_name %></td>
                  <td class="px-3"><%= guest.status %></td>
                  <td class="px-3"><%= button_to "Accept",  accept_invitation_path(guest), method: 'patch', class:"btn-gradient" %> <%= button_to "Reject", reject_invitation_path(guest), method: 'patch', class:"btn-gradient" %></td>
                <% end %>
              </tr>
            <% end %>
          </tbody>
        </table>
      </div>
      <%# <br>
      <div class="row d-flex justify-content-center" style="background-color:white">
        <h3 class="text-center"> Chat</h3>
        <br> %>
      <%# <br>
        <br> %>
      <%# </div> %>
    </div>
    <div class="col-7 planning-table" style="background-color:white" data-available="<%= @event.available_dates.to_json %>" data-unavailable="<%= @event.unavailable_dates.to_json %>">
      <%= calendar(start_date: @event.start_date.to_s, number_of_days: @number_of_day, events: @plannings, new_planning: @new_planning) do |date, plannings| %>
        <%= date %>
        <% plannings.each do |planning| %>
          <div class="planning-item">
            <div class="planning-info">
              <p><%= planning.name %></p>
              <small><%= planning.time unless planning.multi_days? %></small>
            </div>
            <div class="planning-commands">
              <div data-toggle="modal" data-target="#staticBackdropEdit-<%= planning.id %>">
                📝
              </div>
              <div>
                <%= render 'plannings/edit', planning: planning %>
                <%= link_to "🗑️",
                planning_path(planning),
                method: :delete,
                data: { confirm: "Are you sure?" } %>
              </div>
            </div>
          </div>
        <% end %>
      <% end %>
      <br>
      <br>
    </div>
  </div>
</div>
